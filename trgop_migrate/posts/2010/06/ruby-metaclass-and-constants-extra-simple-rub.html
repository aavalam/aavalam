<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<link href='../../../exports.css' rel='stylesheet'>
<link href='../../../exports.css' rel='stylesheet'>

</head>
<body>
<div id='wrap'>
<div id='header'>
<h1>Ruby the Red Gem of Programming</h1>
<h2>This is an archived post
This is an archived post
</h2>
</div>
<div id='content'><div id='nav'>
<a href="../../../posts/2010/06/shoes-twitter-search-v02a.html">Previous</a>
&nbsp; 
<a href="../../../index-16.html">Index</a>
</div>
<div class='post'>
<div class='post_header'>
<h3>Ruby MetaClass and Constants -- Extra: Simple Ruby Module Example</h3>
<div class='post_info'>
<span class='post_time'>June  8 2010,  4:33 AM</span>
<span class='author'>&nbsp;by Victor Goff</span>
</div>
</div>
<div class='post_body'><h2>Ruby MetaClass and Constants and a Simple Module Sample</h2>

<p>This MetaClass subject, came up in class the other day, and it totally
slipped my mind, until a colleague reminded me.  So I will post it here.</p>

<p>The following sample is showing how to access Time constants in it&rsquo;s
metaclass.</p>

<div class="CodeRay">
  <div class="code"><pre>&gt;&gt; require <span class="string"><span class="delimiter">'</span><span class="content">time</span><span class="delimiter">'</span></span>
=&gt; <span class="predefined-constant">true</span>
&gt;&gt; (<span class="keyword">class</span> &lt;&lt; <span class="class">Time</span> ; <span class="predefined-constant">self</span> ; <span class="keyword">end</span>)::<span class="constant">CommonYearMonthDays</span>
=&gt; [<span class="integer">31</span>, <span class="integer">28</span>, <span class="integer">31</span>, <span class="integer">30</span>, <span class="integer">31</span>, <span class="integer">30</span>, <span class="integer">31</span>, <span class="integer">31</span>, <span class="integer">30</span>, <span class="integer">31</span>, <span class="integer">30</span>, <span class="integer">31</span>]
&gt;&gt; (<span class="keyword">class</span> &lt;&lt; <span class="class">Time</span> ; <span class="predefined-constant">self</span> ; <span class="keyword">end</span>)::<span class="constant">LeapYearMonthDays</span>
=&gt; [<span class="integer">31</span>, <span class="integer">29</span>, <span class="integer">31</span>, <span class="integer">30</span>, <span class="integer">31</span>, <span class="integer">30</span>, <span class="integer">31</span>, <span class="integer">31</span>, <span class="integer">30</span>, <span class="integer">31</span>, <span class="integer">30</span>, <span class="integer">31</span>]</pre></div>
</div>


<p>How we are getting to them, is because self is being returned, and self is
the metaclass of Time, so we can get to its constants.  Thanks M.K. for the
answer and Matz for the hint.</p>

<h2>EXTRA!!!</h2>

<h2>Simple Module Use</h2>

<div class="CodeRay">
  <div class="code"><pre><span class="keyword">module</span> <span class="class">Prompt</span>
  <span class="keyword">def</span> <span class="function">prompt</span>(prompt = <span class="string"><span class="delimiter">&quot;</span><span class="content">:&gt; </span><span class="delimiter">&quot;</span></span>, chomp = <span class="predefined-constant">true</span>)
    puts <span class="predefined-constant">self</span> &lt;&lt; prompt
    chomp ? gets.chomp! : gets
  <span class="keyword">end</span>
<span class="keyword">end</span>

<span class="keyword">class</span> <span class="class">String</span>
  include <span class="constant">Prompt</span>
<span class="keyword">end</span>
<span class="string"><span class="delimiter">&quot;</span><span class="content">This is a question</span><span class="delimiter">&quot;</span></span>.prompt <span class="comment"># Returns a string</span></pre></div>
</div>


<p>Hope this simple sample answers some questions!</p>

<p>Either way, feel free to comment below.</p></div>
<div class='post_tags'>
<h4>Tags</h4>
<div class='post_tags_list'>metaclass, module, ruby, simple</div>
</div>
<div class='post_responses'>
<h4>433 views and 0 responses</h4>
<ul class='post_responses list'>
</ul>
</div>
</div>
</div>
</div>
</body>
</html>
